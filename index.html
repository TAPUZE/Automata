<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoCity Israel: Master Plan V7 (Security Edition)</title>
    
    <!-- React Dependencies (Using UNPKG for maximum compatibility) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

    <style>
        body { background-color: #020617; color: #e2e8f0; overflow: hidden; font-family: 'Inter', sans-serif; }
        
        /* Loading Screen */
        #loader { position: fixed; inset: 0; background: #020617; z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; color: #38bdf8; font-family: monospace; transition: opacity 0.5s ease; }
        
        /* Error Box */
        #error-box { display: none; position: fixed; top: 20px; left: 20px; right: 20px; background: #7f1d1d; color: white; padding: 20px; border: 1px solid #ef4444; z-index: 10000; font-family: monospace; }

        /* Glassmorphism */
        .glass-panel {
            background: rgba(15, 23, 42, 0.85);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(56, 189, 248, 0.2);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
        }

        /* Animations */
        @keyframes pan {
            0% { transform: scale(1.1); }
            50% { transform: scale(1.15) translate(-1%, -1%); }
            100% { transform: scale(1.1); }
        }
        .bg-anim { animation: pan 40s infinite ease-in-out; }
        
        .modal-enter { animation: modalIn 0.3s ease-out forwards; }
        @keyframes modalIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        
        .bar-anim { transition: height 1s cubic-bezier(0.4, 0, 0.2, 1); }
    </style>
</head>
<body>

    <!-- 1. LOADING SCREEN -->
    <div id="loader">
        <div class="text-4xl mb-4 animate-spin">☼</div>
        <div>LOADING AUTOCITY OS V7.0...</div>
    </div>

    <!-- 2. ERROR DISPLAY -->
    <div id="error-box"></div>

    <!-- 3. APP ROOT -->
    <div id="root"></div>

    <!-- 4. GLOBAL ERROR HANDLER -->
    <script>
        window.onerror = function(msg, url, line) {
            document.getElementById('loader').style.display = 'none';
            const err = document.getElementById('error-box');
            err.style.display = 'block';
            err.innerHTML = `<strong>CRITICAL ERROR:</strong> ${msg}<br>Line: ${line}`;
        };
    </script>

    <!-- 5. REACT APP -->
    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONS ---
        const Icons = {
            Right: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m9 18 6-6-6-6"/></svg>,
            Left: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m15 18-6-6 6-6"/></svg>,
            X: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M18 6 6 18"/><path d="m6 6 18 18"/></svg>,
            Bot: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect width="18" height="12" x="3" y="6" rx="2"/><path d="M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2"/><circle cx="9" cy="12" r="1"/><circle cx="15" cy="12" r="1"/></svg>,
            Chip: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect width="16" height="16" x="4" y="4" rx="2"/><rect width="6" height="6" x="9" y="9" rx="1"/><path d="M9 1v3"/><path d="M15 1v3"/><path d="M9 20v3"/><path d="M15 20v3"/><path d="M20 9h3"/><path d="M20 14h3"/><path d="M1 9h3"/><path d="M1 14h3"/></svg>,
            Shield: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
        };

        // --- DATA ---
        const slides = [
            {
                id: '1', layout: 'hero',
                title: 'AUTOCITY ISRAEL', subtitle: 'ZERO-LABOR METROPOLIS', tag: 'NEGEV DESERT // 2026',
                bg: 'https://images.unsplash.com/photo-1480714378408-67cf0d13bc1b?auto=format&fit=crop&q=80&w=1920',
                details: { title: 'Executive Summary', text: 'AutoCity is a greenfield smart city project located in the Northern Negev.\n\nDesigned from the bedrock up for automation, we replace labor with autonomous systems from Day 1.\n\nBy burying logistics and utilizing robotic maintenance, we reduce municipal OPEX by 35%.' }
            },
            {
                id: '2', layout: 'stats',
                title: 'THE CRISIS', subtitle: 'SYSTEM FAILURE IMMINENT',
                cards: [
                    { label: 'LABOR GAP', val: '450k', sub: 'Missing Workers', desc: 'Israel & US face massive construction labor shortages. Productivity has been stagnant for 50 years.' },
                    { label: 'OPEX WASTE', val: '35%', sub: 'Budget Loss', desc: 'Municipal budgets are drained by manual services: garbage trucks, street sweeping, and policing.' },
                    { label: 'HOUSING', val: '$1.2M', sub: 'Avg Unit Price', desc: 'Tel Aviv is unaffordable. We must automate to lower costs by at least 30%.' }
                ]
            },
            // --- NEW SECURITY SLIDE ---
            {
                id: '3', layout: 'split',
                title: 'STRATEGY', subtitle: 'NATIONAL SECURITY',
                bg: 'https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?auto=format&fit=crop&q=80&w=1920', // Cyber/Security image
                content: {
                    main: 'Labor Sovereignty. By deploying autonomous fleets, we eliminate the strategic risk of relying on hostile or unstable external workforces.',
                    details: 'STRATEGIC ADVANTAGES:\n\n1. LABOR INDEPENDENCE:\n• No reliance on Palestinian or foreign labor.\n• Robots have no political allegiance and require no security clearance.\n• Construction continues during lockdowns, wars, or border closures.\n\n2. CLOSED LOOP SITES:\n• No daily entry of thousands of unknown personnel.\n• Sites are "Sterile Zones" managed by vetted supervisors.\n\n3. RESILIENCE:\n• Underground logistics function 24/7, immune to surface threats (missiles/terrorism).'
                }
            },
            // --------------------------
            {
                id: '4', layout: 'split',
                title: 'PHASE 1: DIG', subtitle: 'AUTO-TERRAFORMING',
                bg: 'https://images.unsplash.com/photo-1541888946425-d81bb19240f5?auto=format&fit=crop&q=80&w=1920',
                content: {
                    main: 'Swarm excavation. Autonomous bulldozers grade the land and trench utility tunnels with GPS precision.',
                    details: 'TECH SPECS:\n\n1. BUILT ROBOTICS:\n• Retrofit kits for standard excavators\n• 24/7 operation without human operators\n\n2. TELEO SUPERVISION:\n• One human manages 10 bots remotely via 5G\n\n3. RESULT:\n• 40% reduction in earthworks cost'
                }
            },
            {
                id: '5', layout: 'split',
                title: 'PHASE 2: BUILD', subtitle: 'FACTORY-IN-THE-FIELD',
                bg: 'https://images.unsplash.com/photo-1531834685032-c34bf0d84c7c?auto=format&fit=crop&q=80&w=1920',
                content: {
                    main: 'Gantry printers extrude the city block by block using local Negev sand.',
                    details: 'TECH SPECS:\n\n1. ICON VULCAN:\n• 3D Prints 3,000 sqft/day\n• Material: "Lavacrete" (Local Sand)\n\n2. HILTI JAIBOT:\n• Autonomous overhead drilling for utilities\n• BIM-to-Field accuracy +/- 1mm'
                }
            },
            {
                id: '6', layout: 'split',
                title: 'PHASE 3: FINISH', subtitle: 'ROBOTIC INTERIORS',
                bg: 'https://images.unsplash.com/photo-1621905251189-08b45d6a269e?auto=format&fit=crop&q=80&w=1920',
                content: {
                    main: 'Precision inside the shell. Robots handle drywall, painting, and finishing.',
                    details: 'TECH SPECS:\n\n1. CANVAS:\n• AI-driven drywall finishing robot\n• Sprays and sands to Level 5 finish\n\n2. OKIBO:\n• Autonomous plastering and painting\n\n3. QUALITY:\n• Zero human error, perfect consistency'
                }
            },
            {
                id: '7', layout: 'split',
                title: 'LAYER 1: VEINS', subtitle: 'UNDERGROUND LOGISTICS',
                bg: 'https://images.unsplash.com/photo-1617526738882-1ea945ce3e56?auto=format&fit=crop&q=80&w=1920',
                content: {
                    main: 'We separate logistics from life. A dedicated "Metro" layer for freight moves pallets underground.',
                    details: 'TECH SPECS:\n\n1. PIPEDREAM LABS:\n• 12-inch uPVC pipe network\n• 80km/h autonomous pods\n\n2. ENVAC WASTE:\n• Pneumatic suction for trash (70km/h)\n• No garbage trucks on surface'
                }
            },
            {
                id: '8', layout: 'split',
                title: 'LAYER 3: BRAIN', subtitle: 'DIGITAL TWIN OS',
                bg: 'https://images.unsplash.com/photo-1518770660439-4636190af475?auto=format&fit=crop&q=80&w=1920',
                content: {
                    main: 'The single source of truth. We simulate traffic, energy, and robot fleets before deployment.',
                    details: 'TECH SPECS:\n\n1. NVIDIA OMNIVERSE:\n• Physics-accurate simulation\n\n2. OPEN-RMF:\n• Robotics Middleware Framework\n• Allows delivery bots to talk to elevators'
                }
            },
            {
                id: '9', layout: 'chart',
                title: 'MARKET DATA', subtitle: 'ISRAEL TECH ECOSYSTEM',
                data: [
                    { label: 'Smart City', val: 500, max: 1000, suffix: 'M' },
                    { label: 'Const-Tech', val: 850, max: 1000, suffix: 'M' },
                    { label: 'Negev Pop', val: 1.2, max: 2, suffix: 'M' },
                    { label: 'Labor Gap', val: 45, max: 100, suffix: 'K' }
                ],
                details: 'DATA SOURCE:\n• Smart City Rev: Projected $503M by 2028\n• Const-Tech: $850M invested in Israeli startups\n• Gov Goal: Move 1.2M residents to Negev by 2035'
            },
            {
                id: '10', layout: 'chart',
                title: 'FINANCIALS', subtitle: 'UNIT ECONOMICS',
                data: [
                    { label: 'Infra Cost', val: 120, max: 150, suffix: '%' },
                    { label: 'Ops Cost', val: 65, max: 100, suffix: '%' },
                    { label: 'Waste Ops', val: 10, max: 100, suffix: '%' },
                    { label: 'IRR', val: 14, max: 20, suffix: '%' }
                ],
                details: 'FINANCIAL MODEL:\n• High CAPEX: Utilidors cost +20% upfront\n• Low OPEX: Automation saves 35% annually\n• Result: 14% IRR over 20 years'
            },
            {
                id: '11', layout: 'hero',
                title: 'THE ASK', subtitle: '$100M SEED ROUND', tag: 'EQUITY & LAND',
                bg: 'https://images.unsplash.com/photo-1451187580459-43490279c0fa?auto=format&fit=crop&q=80&w=1920',
                details: { title: 'Use of Funds', text: '• $40M: Land Acquisition (Negev Tender)\n• $25M: Digital Twin & OS Development\n• $15M: Regulatory & Legal Frameworks\n• $20M: Team & Operations' }
            }
        ];

        // --- COMPONENTS ---

        const Modal = ({ content, onClose }) => {
            if (!content) return null;
            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/90 backdrop-blur-md modal-enter" onClick={onClose}>
                    <div className="glass-panel w-full max-w-2xl p-8 rounded-lg relative border-l-4 border-cyan-500" onClick={e => e.stopPropagation()}>
                        <button onClick={onClose} className="absolute top-6 right-6 text-slate-500 hover:text-white transition-colors"><Icons.X /></button>
                        <h3 className="text-2xl font-bold text-cyan-400 mb-6 font-mono border-b border-cyan-900/50 pb-4">{content.title}</h3>
                        <div className="text-slate-300 text-sm leading-loose whitespace-pre-wrap font-mono h-[60vh] overflow-y-auto pr-4">
                            {content.details || content.text}
                        </div>
                    </div>
                </div>
            );
        };

        const SlideHero = ({ slide, onOpen }) => (
            <div className="h-full flex flex-col items-center justify-center text-center relative z-10 px-4">
                <div className="mb-8 text-cyan-400"><Icons.Bot /></div>
                <h1 className="text-6xl md:text-9xl font-black text-white mb-6 tracking-tighter drop-shadow-2xl">{slide.title}</h1>
                <h2 className="text-2xl md:text-3xl text-cyan-200 font-light tracking-widest mb-12 uppercase">{slide.subtitle}</h2>
                <div className="px-4 py-2 bg-cyan-950/50 border border-cyan-500/30 rounded text-xs font-mono text-cyan-400 mb-12">{slide.tag}</div>
                <button onClick={onOpen} className="px-8 py-3 bg-white text-black hover:bg-cyan-400 transition-colors font-bold text-sm tracking-wider flex items-center gap-2">
                    EXPLORE DATA <Icons.Right />
                </button>
            </div>
        );

        const SlideStats = ({ slide, onOpen }) => (
            <div className="h-full flex flex-col justify-center max-w-6xl mx-auto px-6 z-10 relative">
                <div className="mb-12 border-l-4 border-cyan-500 pl-6">
                    <h2 className="text-5xl font-black text-white mb-2">{slide.title}</h2>
                    <p className="text-xl text-slate-400 font-mono">{slide.subtitle}</p>
                </div>
                <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                    {slide.cards.map((c, i) => (
                        <div key={i} className="glass-panel p-8 hover:border-cyan-500 transition-colors cursor-pointer group flex flex-col justify-between min-h-[200px]" onClick={() => onOpen({title: c.label, details: c.desc})}>
                            <div className="text-4xl font-bold text-white mb-2 font-mono group-hover:text-cyan-400">{c.val}</div>
                            <div>
                                <div className="text-xl font-bold text-cyan-200 mb-1">{c.label}</div>
                                <div className="text-xs text-slate-500 font-mono uppercase">{c.sub}</div>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        );

        const SlideSplit = ({ slide, onOpen }) => (
            <div className="h-full flex flex-col md:flex-row z-10 relative">
                <div className="flex-1 flex flex-col justify-center p-12 md:p-24 bg-black/60 backdrop-blur-sm border-r border-slate-800">
                    <div className="mb-4 text-cyan-500 font-mono text-xs">SYSTEM ARCHITECTURE</div>
                    <h2 className="text-5xl font-black text-white mb-4 leading-none">{slide.title}</h2>
                    <h3 className="text-xl text-slate-300 mb-8 font-light tracking-widest">{slide.subtitle}</h3>
                    <p className="text-lg text-slate-400 leading-relaxed mb-8 border-l-2 border-slate-700 pl-4">
                        {slide.content.main}
                    </p>
                    <button onClick={() => onOpen({title: slide.subtitle + ' SPECS', details: slide.content.details})} className="self-start text-cyan-400 hover:text-white font-mono text-xs flex gap-2 border-b border-cyan-500 pb-1">
                        VIEW BLUEPRINTS <Icons.Right />
                    </button>
                </div>
                <div className="flex-1"></div> 
            </div>
        );

        const SlideChart = ({ slide, onOpen }) => (
            <div className="h-full flex flex-col justify-center max-w-5xl mx-auto px-6 z-10 relative">
                <div className="text-center mb-16">
                    <h2 className="text-4xl font-bold text-white mb-2">{slide.title}</h2>
                    <p className="text-slate-400 font-mono">{slide.subtitle}</p>
                </div>
                <div className="glass-panel p-12 h-96 flex items-end justify-between gap-8 relative" onClick={() => onOpen({title: 'Data Analysis', details: slide.details})}>
                     <div className="absolute inset-0 p-12 flex flex-col justify-between opacity-10 pointer-events-none">
                        <div className="w-full h-px bg-cyan-500"></div>
                        <div className="w-full h-px bg-cyan-500"></div>
                        <div className="w-full h-px bg-cyan-500"></div>
                    </div>
                    {slide.data.map((d, i) => (
                        <div key={i} className="flex-1 flex flex-col items-center gap-4 h-full justify-end group cursor-pointer z-10">
                            <div className="mb-2 opacity-0 group-hover:opacity-100 transition-opacity text-cyan-300 font-mono text-xs bg-black px-2 py-1 border border-cyan-900">
                                {d.val}{d.suffix}
                            </div>
                            <div className="w-full bg-cyan-800 opacity-80 group-hover:opacity-100 group-hover:bg-cyan-400 bar-anim hover:shadow-[0_0_15px_rgba(34,211,238,0.4)]" 
                                 style={{ height: `${(d.val / d.max) * 100}%` }}></div>
                            <div className="text-xs font-bold text-slate-500 group-hover:text-white font-mono uppercase tracking-widest">{d.label}</div>
                        </div>
                    ))}
                </div>
            </div>
        );

        // --- MAIN APP ---
        const App = () => {
            const [idx, setIdx] = useState(0);
            const [modal, setModal] = useState(null);

            useEffect(() => {
                const loader = document.getElementById('loader');
                if(loader) loader.style.opacity = '0';
                setTimeout(() => { if(loader) loader.style.display = 'none'; }, 500);
            }, []);

            const next = () => setIdx(c => Math.min(c + 1, slides.length - 1));
            const prev = () => setIdx(c => Math.max(c - 1, 0));

            useEffect(() => {
                const handleKey = (e) => {
                    if (e.key === 'ArrowRight') next();
                    if (e.key === 'ArrowLeft') prev();
                    if (e.key === 'Escape') setModal(null);
                };
                window.addEventListener('keydown', handleKey);
                return () => window.removeEventListener('keydown', handleKey);
            }, []);

            const slide = slides[idx];

            return (
                <div className="h-screen w-full relative bg-slate-950 overflow-hidden text-slate-200">
                    
                    {/* Background */}
                    <div className="absolute inset-0 z-0">
                        {slide.bg && (
                            <div className="absolute inset-0 bg-cover bg-center opacity-40 bg-anim transition-all duration-700 ease-in-out"
                                 style={{ backgroundImage: `url(${slide.bg})` }}></div>
                        )}
                        <div className="absolute inset-0 bg-gradient-to-t from-slate-950 via-slate-950/80 to-transparent"></div>
                    </div>

                    {/* Header */}
                    <div className="absolute top-0 w-full p-6 flex justify-between z-40 pointer-events-none mix-blend-screen text-white">
                        <div className="flex items-center gap-2">
                            <Icons.Chip />
                            <span className="font-bold tracking-widest text-xs">AUTOCITY_OS_V7.0</span>
                        </div>
                        <div className="font-mono text-xs text-cyan-500">{idx + 1} / {slides.length}</div>
                    </div>

                    {/* Dynamic Slide */}
                    <div key={slide.id} className="h-full w-full modal-enter">
                        {slide.layout === 'hero' && <SlideHero slide={slide} onOpen={() => setModal(slide.details)} />}
                        {slide.layout === 'stats' && <SlideStats slide={slide} onOpen={setModal} />}
                        {slide.layout === 'split' && <SlideSplit slide={slide} onOpen={setModal} />}
                        {slide.layout === 'chart' && <SlideChart slide={slide} onOpen={setModal} />}
                    </div>

                    {/* Footer Controls */}
                    <div className="absolute bottom-0 w-full p-6 flex justify-between items-end z-40 pointer-events-none">
                        <div className="hidden md:block text-[10px] text-slate-600 font-mono">CONFIDENTIAL // KALMAN GREENFIELD</div>
                        <div className="flex gap-2 pointer-events-auto">
                            <button onClick={prev} disabled={idx===0} className="p-3 bg-slate-800/50 border border-slate-700 hover:border-cyan-500 hover:text-white transition-all disabled:opacity-20 text-slate-300">
                                <Icons.Left />
                            </button>
                            <button onClick={next} disabled={idx===slides.length-1} className="p-3 bg-slate-800/50 border border-slate-700 hover:border-cyan-500 hover:text-white transition-all disabled:opacity-20 text-slate-300">
                                <Icons.Right />
                            </button>
                        </div>
                    </div>

                    {/* Modal */}
                    <Modal content={modal} onClose={() => setModal(null)} />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
